# Разработка Системы Управления Задачами

## Описание задачи:<br>
Вам необходимо разработать простую систему управления задачами (Task Management System) с использованием Java. Система должна обеспечивать создание, редактирование, удаление и просмотр задач. Каждая задача должна содержать заголовок, описание, статус (например, "в ожидании", "в процессе", "завершено") и приоритет (например, "высокий", "средний", "низкий"), а также автора задачи и исполнителя. Реализовать необходимо только API.

## Требования:<br>
1. Сервис должен поддерживать аутентификацию и авторизацию пользователей по email и паролю.
2. Доступ к API должен быть аутентифицирован с помощью JWT токена.
3. Пользователи могут управлять своими задачами: создавать новые, редактировать существующие, просматривать и удалять, менять статус и назначать исполнителей задачи.
4. Пользователи могут просматривать задачи других пользователей, а исполнители задачи могут менять статус своих задач.
5. К задачам можно оставлять комментарии.
6. API должно позволять получать задачи конкретного автора или исполнителя, а также все комментарии к ним. Необходимо обеспечить фильтрацию и пагинацию вывода.
7. Сервис должен корректно обрабатывать ошибки и возвращать понятные сообщения, а также валидировать входящие данные.
8. Сервис должен быть хорошо задокументирован. API должен быть описан с помощью Open API и Swagger. В сервисе должен быть настроен Swagger UI. Необходимо написать README с инструкциями для локального запуска проекта. Дев среду нужно поднимать с помощью docker compose.
9. Напишите несколько базовых тестов для проверки основных функций вашей системы.
10. Используйте для реализации системы язык Java 17+, Spring, Spring Boot. В качестве БД можно использовать PostgreSQL или MySQL. Для реализации аутентификации и авторизации нужно использовать Spring Security. Можно использовать дополнительные инструменты, если в этом есть необходимость (например, кэш).

### Запуск проекта:<br>
1. Клонировать репозиторий.
2. Перейти в папку docker и запустить docker-контейнер с БД PostgreSQL.
````
cd docker
docker compose up
````
3. Запустить проект в своей IDE.

### Проверка работы запросов:<br>
Для упрощения проверки работоспособности предлагаю использовать готовые запросы для Postman.<br>
Что нужно сделать:<br>
1. Импортировать коллекцию в Postman из <u>src/main/resources/other/TaskManagementService.postman_collection.json</u>
2. В Postman создать окружение, в котором указать:

   | Variable | Type    | Initial value      | Current value |
   |----------|---------|--------------------|---------------|
   | baseUrl  | default | http://localhost:8080/ |http://localhost:8080/|

Описание работы методов:

<u>1. Auth (Доступ для всех пользователей.)</u>
- CreateUser - метод регистрации нового пользователя. В методе установлен контроль уникальности полей "username" и "email"
для исключения возможности создавать дубликаты пользователей. В теле запроса принимает json:
````
{
    "username": "admin",
    "password": "12345",
    "roles": ["ROLE_ADMIN"],
    "email": "admin@mail.ru"
}
````
- Signin - метод получения JWT-токена для зарегистрированного пользователя. В теле запроса принимает json:
````
{
    "email": "admin@mail.ru",
    "password": "12345"
}
````

Для авторизации пользователя можно использовать Basic Auth с использованием связки email+password или Bearer Token с 
использованием jwt-токена, полученного в методе Signin.

<u>2. User (Доступ только для авторизованного пользователя с ролью администратора.)</u>
- GetUserById - метод позволяет получить данные пользователя по его id. Принимает id из параметра запроса.
- UpdateUserById - метод позволяет изменить данные пользователя по его id. Принимает id из параметра запроса, в теле запроса принимает json:
````
{
    "username": "admin1",
    "roles": ["ROLE_ADMIN"],
    "email": "admin@mail.ru"
}
````
- GetAllUser - метод позволяет получить данные всех пользователей, зарегистрированных в системе.
- DeleteUserById - метод позволяет удалить пользователя по его id. Принимает id из параметра запроса.

<u>3. Task (Доступ только для авторизованных пользователей.)</u>
- GetAllTask - Метод, доступный только администратору, позволяющий получить список всех задач.
- GetTaskById - Метод, доступный только администратору, позволяющий получить задачу по её id. Принимает id из параметра запроса.
- DeleteTaskById - Метод, доступный только администратору, позволяющий удалить задачу по её id. Принимает id из параметра запроса.
- GetAllTaskByExecutor - Метод, доступный всем авторизованным пользователям, позволяющий получить список всех задач, в которых пользователь назначен исполнителем.
- CreateNewTask - Метод, доступный всем авторизованным пользователям, позволяющий создать новую задачу. В теле запроса принимает json:
````
{
    "title": "task1",
    "statusTask": "PENDING",
    "priorityTask": "LOW",
    "comments": [],
    "executorId": 1
}
````
- UpdateTaskById - Метод, доступный всем авторизованным пользователям, позволяющий изменять данные в задаче, при условии, что пользователь является её исполнителем. 
Администратор имеет полный доступ к методу. Принимает id из параметра запроса, в теле запроса принимает json:
````
{
        "title": "task1-new",
        "statusTask": "IN_PROGRESS",
        "priorityTask": "MEDIUM",
        "comments": [],
        "executorId": 1
}
````
- AddComment - Метод, доступный всем авторизованным пользователям, позволяющий добавить комментарий к задаче по её id, при условии, что пользователь является её исполнителем. 
Администратор имеет полный доступ к методу. Принимает id из параметра запроса, в теле запроса принимает json:
````
{
    "comment": "user2 добавил коммент"
}
````

### Документация:<br>
Документация swagger доступна после запуска приложения по url: <br>
http://localhost:8080/swagger-ui/index.html <br>
http://localhost:8080/v3/api-docs

### Стек технологий::<br>
- Java Core
- Spring Boot
- Spring Security
- Jsonwebtoken
- Hibernate
- PostgreSQL
- Apache Maven
- Lombok
- Junit-jupiter
- Mockito-Core
- OpenApi
